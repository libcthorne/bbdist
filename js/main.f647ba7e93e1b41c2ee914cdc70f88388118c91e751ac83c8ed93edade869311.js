(()=>{window.openMenu=function(){let e=document.getElementById("menu");if(e.dataset.open==="true"||e.dataset.midAnimation==="true")return!1;window.scrollTo({top:0,left:0,behavior:"smooth"}),e.dataset.open="true",e.dataset.midAnimation="true",e.classList.remove("d-none","fade-out"),e.classList.add("fade-in"),document.getElementById("openMenuButton").classList.add("d-none"),document.getElementById("closeMenuButton").classList.remove("d-none");let u=Array.from(document.querySelectorAll("#sections > div")).slice(1);for(let m of u)m.classList.add("d-none");return setTimeout(()=>{document.querySelector("#sections > div:first-of-type").classList.add("d-none"),e.dataset.midAnimation="false"},500),!0};window.closeMenu=function(){let e=document.getElementById("menu");if(e.dataset.open==="false"||e.dataset.midAnimation==="true")return!1;window.scrollTo({top:0,left:0,behavior:"smooth"}),e.dataset.open="false",e.dataset.midAnimation="true",e.classList.remove("fade-in"),e.classList.add("fade-out"),document.getElementById("closeMenuButton").classList.add("d-none"),document.getElementById("openMenuButton").classList.remove("d-none");let r=document.querySelectorAll("#sections > div");for(let u of r)u.classList.remove("d-none");return setTimeout(()=>{e.classList.add("d-none"),e.dataset.midAnimation="false"},500),!0};window.closeMenuToViewSection=function(){let e=document.getElementById("menu");if(e.classList.contains("d-none"))return!0;if(e.dataset.open==="false"||e.dataset.midAnimation==="true")return!1;e.classList.add("d-none"),e.dataset.open="false",e.dataset.midAnimation="false",document.getElementById("closeMenuButton").classList.add("d-none"),document.getElementById("openMenuButton").classList.remove("d-none");let r=document.querySelectorAll("#sections > div");for(let u of r)u.classList.remove("d-none");return!0};window.scrollToElementOffset=function(e){let n=document.getElementById("header").offsetHeight,r=e.getBoundingClientRect().top+window.scrollY-n;window.scrollTo({top:r,behavior:"smooth"})};window.scrollToContact=function(){let e=document.getElementById("contact");scrollToElementOffset(e)};window.openAboutSection=function(){if(!closeMenuToViewSection())return;let e=document.getElementById("ourMission");scrollToElementOffset(e)};window.openServicesSection=function(){if(!closeMenuToViewSection())return;let e=document.getElementById("services");scrollToElementOffset(e)};window.openOurEdgeSection=function(){if(!closeMenuToViewSection())return;let e=document.getElementById("ourEdge");scrollToElementOffset(e)};window.openContactSection=function(){if(!closeMenuToViewSection())return;let e=document.getElementById("contact");scrollToElementOffset(e)};window.showSubmittedForm=function(e){let n=e.querySelector("#contactForm"),i=e.querySelector("#submittedForm");n.classList.add("fade-out"),setTimeout(()=>{i.classList.remove("d-none","fade-out"),i.classList.add("fade-in"),n.reset(),n.disabled=!1},500),logEvent(analytics,"contact_submitted")};window.submitForm=async function(e){let n=document.getElementById(e),i=n.querySelector("#contactForm");if(i.disabled)return;i.disabled=!0;let r=n.querySelector("#emailField"),u=r.value;r.disabled=!0;let m=n.querySelector("#messageField"),p=m.value;m.disabled=!0;let t=n.querySelector("#sendButton");t.classList.add("d-none");let s=n.querySelector("#sendingButton");s.classList.remove("d-none");let o=null;try{o=await sendContactEmail(u,p)}finally{o?showSubmittedForm(n):(i.disabled=!1,r.disabled=!1,m.disabled=!1,t.classList.remove("d-none"),s.classList.add("d-none"),alert("We were unable to send your message, please try again."))}};document.addEventListener("DOMContentLoaded",function(){if(window.innerWidth<576){console.log("Mobile device detected - skipping animations"),document.querySelectorAll(".service-item").forEach(n=>{n.style.opacity="1"});let e=document.getElementById("contactLogo");e&&(e.style.opacity="1")}else{let e=()=>{let t=document.querySelector(".earth-desktop");if(!t){console.log("Earth element not found");return}t.classList.add("earth-desktop-hidden");let s=()=>{console.log("Triggering earth element fade-in"),t.classList.remove("earth-desktop-hidden"),t.style.transition="opacity 0.6s ease-in-out",t.style.opacity="1"},o=0,c=setInterval(()=>{o++;let l=t.querySelector("video");l&&(l.readyState>=3||o>10)&&(console.log("Earth video ready state:",l.readyState),clearInterval(c),setTimeout(s,50)),(!l||o>20)&&(console.log("Earth video fallback trigger"),clearInterval(c),s())},100)},n=()=>{document.getElementById("ourEdge")},i=()=>{let t=document.getElementById("ourEdge");if(!t)return;let s=new IntersectionObserver(o=>{o.forEach(c=>{c.isIntersecting&&(n(),s.unobserve(c.target))})},{threshold:.05,rootMargin:"0px 0px -100px 0px"});s.observe(t)},r=()=>{let t=document.querySelectorAll("#ourEdge .d-none.d-sm-block .col-6");if(t.length===0)return;let s=new IntersectionObserver(o=>{o.forEach(c=>{if(c.isIntersecting){let l=c.target,f=l.querySelector(".position-relative"),v=f?.querySelector(".our-edge-image"),d=l.querySelector("h4.roboto-bold"),g=l.querySelector("p.roboto-regular");f&&f.classList.add("fade-in-up","delay-1"),d&&d.classList.add("fade-in-up","delay-2"),g&&g.classList.add("fade-in-up","delay-3"),s.unobserve(l)}})},{threshold:.15,rootMargin:"0px 0px -100px 0px"});t.forEach(o=>{s.observe(o)})},u=()=>{console.log("Observing arms element");let t=document.querySelector(".arms-desktop");if(!t)return;console.log("Arms element found"),t.style.opacity="0";let s=new IntersectionObserver(o=>{o[0].isIntersecting&&(console.log("Arms element visible"),t.style.transition="opacity 0.5s ease-in-out",t.style.opacity="1",s.unobserve(o[0].target))},{threshold:.3,rootMargin:"0px 0px -40px 0px"});s.observe(t)},m=()=>{let t=document.querySelector("#services .d-none.d-sm-block");if(!t)return;let s=t.querySelectorAll(".col-6:nth-of-type(1) .service-item"),o=t.querySelectorAll(".service-item.service-right");s.forEach(d=>{d.style.opacity="0"}),o.forEach(d=>{d.style.opacity="0"});let c=document.getElementById("ourServicesTop"),l=document.getElementById("ourServicesBottom");if(!c||!l)return;let f=new IntersectionObserver(d=>{d[0].isIntersecting&&(console.log("Top services container visible"),s.forEach(g=>{g.classList.add("fade-in-left")}),f.unobserve(d[0].target))},{threshold:.2,rootMargin:"0px 0px -50px 0px"}),v=new IntersectionObserver(d=>{d[0].isIntersecting&&(console.log("Bottom services container visible"),o.forEach(g=>{g.classList.add("fade-in-right")}),v.unobserve(d[0].target))},{threshold:.4,rootMargin:"0px 0px -40px 0px"});f.observe(c),v.observe(l)},p=()=>{let t=document.getElementById("contactLogo"),s=document.getElementById("contact");if(!t||!s)return;t.style.opacity="0";let o=new IntersectionObserver(c=>{c[0].isIntersecting&&(console.log("Contact section visible"),t.classList.add("fade-in-right"),o.unobserve(c[0].target))},{threshold:.2,rootMargin:"0px 0px -50px 0px"});o.observe(t)};e(),i(),r(),u(),m(),p()}});window.onload=function(){};})();
